{
	"name": "Ecological Momentary Assessment (EMA) Assistant",

	"namespace": "Stanford\\EMA",

	"description": "A REDCap EM designed to create and manage surveys using the ecological momentary assessment method",

	"documentation": "README.md",

	"authors": [
		{
			"name": "Andrew Martin",
			"email": "andy123@stanford.edu",
			"institution": "Stanford University"
		}
	],

	"permissions": [
		"redcap_module_system_enable",
		"redcap_module_project_enable",
		"redcap_module_save_configuration"
	],

	"enable-every-page-hooks-on-system-pages": false,

	"links": {
		"project": [
            {
                "name": "EMA Randomizer",
                "icon": "fas fa-random",
                "url": "pages/generator.php",
                "show-header-and-footer": true
            }
		],
		"control-center": [
		]
	},

	"no-auth-pages": [

	],

	"project-settings": [

        {
            "key": "windows",
            "name": "<b>Define 1 or more EMA Windows</b>",
            "required": true,
            "type": "sub_settings",
            "repeatable": true,
            "sub_settings": [
                {
                    "key": "window-name",
                    "name": "<b>Window Name</b><br>Must be unique for each window and should not be changed after instantiated for records",
                    "required": true,
                    "type": "text"
                },
                {
                    "key": "window-trigger-logic",
                    "name": "<b>Window Trigger Logic</b><br>If set, the window will only be instantiated if this is true and the start field below is configured.  Leave blank and then any value in the start field below will cause the window to be instantiated for a record",
                    "required": false,
                    "type": "textarea"
                },
                {
                    "key": "window-start-field",
                    "name": "<b>Window Start Date Field</b><br>This is a date field that is day 0 for the window",
                    "required": false,
                    "type": "field-list"
                },
                {
                    "key": "window-start-event",
                    "name": "<b>Window Start Date Event</b><br>If specified, this is event where field above resides",
                    "required": false,
                    "type": "event-list"
                },
                {
                    "key": "window-kill-field",
                    "name": "<b>Window Kill Field</b><br>If specified, this field must be 'true' (e.g. a calc field of 1) in order for notifications to go out for this user/window",
                    "required": false,
                    "type": "field-list"
                },
                {
                    "key": "window-kill-event",
                    "name": "<b>Window Kill Event</b><br>If specified, this is event where field above resides",
                    "required": false,
                    "type": "event-list"
                },
                {
                    "key": "window-days",
                    "name": "<b>Window Days</b><br>A comma-separated list of day numbers from the Start Field (which is day 0).  e.g. 1,2,3,4,5,6,7",
                    "required": true,
                    "type": "text"
                },
                {
                    "key": "schedule-name",
                    "name": "<b>Schedule Name</b><br>Name of schedule from next section that should be instantiated on this window",
                    "required": true,
                    "type": "text"
                },
                {
                    "key": "window-form",
                    "name": "<b>Repeating Survey Form</b><br>Name of the form",
                    "required": false,
                    "type": "form-list"
                },
                {
                    "key": "window-form-event",
                    "name": "<b>Repeating Survey Event</b><br>Name of the event where the form above resides",
                    "required": false,
                    "type": "event-list"
                },
                {
                    "key": "default-schedule-start-time",
                    "name": "<b>Default Daily Schedule Start Time</b><br>Enter minutes from midnight as the default schedule start time each day, <i>e.g. 8AM would be 60*8 = 480</i>",
                    "required": true,
                    "type": "text"
                },
                {
                    "key": "custom-start-time-field",
                    "name": "<b>Custom Start Time Offset Field</b><br>If specified, the start-time for a given record can be customized.  The field should contain the number of minutes from midnight when first EMA event of the day should begin",
                    "required": false,
                    "type": "field-list"
                },
                {
                    "key": "custom-start-time-event",
                    "name": "<b>Custom Start Time Offset Event</b><br>If specified, this is event where field above resides",
                    "required": false,
                    "type": "event-list"
                },
            ]
        },
        {
            "key": "schedules",
            "name": "<b>Schedules</b>",
            "required": false,
            "type": "sub_settings",
            "repeatable": true,
            "sub_settings": [
                {
                    "key": "schedule-name",
                    "name": "<b>Schedule Name</b><br>Should be unique",
                    "required": true,
                    "type": "text"
                },
                {
                    "key": "schedule-offsets",
                    "name": "<b>Offsets</b><br>A comma-separated list of minute offsets between EMA windows (e.g. 0,240,480,720)",
                    "required": true,
                    "type": "text"
                },
                {
                    "key": "schedule-randomize-window",
                    "name": "<b>Randomize Window</b><br>If entered, offsets will be randomized between 0 minutes and this many minutes.  e.g. a value of 60 will randomize the initial event by up to an hour from the offset.",
                    "required": false,
                    "type": "text"
                },
                {
                    "key": "schedule-reminders",
                    "name": "<b>Reminders</b><br>A comma-separated list of reminder times (e.g. 5,10)",
                    "required": false,
                    "type": "text"
                },
                {
                    "key": "schedule-close-offset",
                    "name": "<b>Event Close Offset</b><br>Enter the number of minutes from initial invitation when the EMA window will end (e.g. 20).  New survey entries after this time will not be allowed",
                    "required": false,
                    "type": "text"
                }
            ]
        },

        {
            "key": "error-email-address",
            "name": "<b>Error Email</b><br>(optional) In the event there is a configuration error or processing error, enter an email address to be notified.",
            "required": false,
            "type": "text"
        },

        {
			"key": "enable-project-debug-logging",
			"name": "<b>Enable Debug Logging</b><br><i>(optional)</i> Requires installation and configuration of emLogger",
			"required": false,
			"type": "checkbox"
		}
	],


	"system-settings": [
		{
			"key": "enable-system-debug-logging",
			"name": "<b>Enable Debug Logging (system-wide)</b><i>(optional)</i> Requires installation and configuration of emLogger",
			"required": false,
			"type": "checkbox"
		}
	],

	"compatibility": {
		"php-version-min": "",
		"php-version-max": "",
		"redcap-version-min": "",
		"redcap-version-max": ""
	}
}
